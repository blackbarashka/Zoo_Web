# Веб-приложение для Московского зоопарка
# Мусаев Умахан Рашидович БПИ234
## Описание проекта
Данное веб-приложение разработано для автоматизации ключевых бизнес-процессов Московского зоопарка, включая управление животными, вольерами и расписанием кормления. Приложение построено с использованием принципов **Clean Architecture** и концепций **Domain-Driven Design (DDD)**.

---

## Основные возможности

### Управление животными
- Добавление и удаление животных.
- Перемещение животных между вольерами с проверкой совместимости типов.
- Просмотр информации о животных.

### Управление вольерами
- Добавление и удаление вольеров.
- Просмотр информации о вольерах (тип, вместимость, текущее количество животных).
- Уборка вольеров.

### Управление расписанием кормления
- Просмотр расписания кормления для всех животных или конкретного животного.
- Добавление нового расписания кормления.
- Изменение времени кормления.
- Отметка выполнения кормления.

### Статистика зоопарка
- Подсчет количества животных, свободных вольеров и других метрик.
- Просмотр сводной статистики по зоопарку.

---

## Архитектура

### Применение Clean Architecture
- **Domain**:
  - Основные модели: `Animal`, `Enclosure`, `FeedingSchedule`.
  - Доменные события: `AnimalMovedEvent`, `FeedingTimeEvent`.
  - Полностью изолирован от других слоев.
- **Application**:
  - Сервисы: `AnimalTransferService`, `FeedingOrganizationService`, `ZooStatisticsService`.
  - Инкапсулирует бизнес-логику и взаимодействует с репозиториями через интерфейсы.
- **Infrastructure**:
  - Реализует in-memory хранилища: `InMemoryAnimalRepository`, `InMemoryEnclosureRepository`, `InMemoryFeedingScheduleRepository`.
  - Отвечает за взаимодействие с внешними системами.
- **Presentation**:
  - REST API контроллеры: `AnimalController`, `EnclosureController`, `FeedingScheduleController`, `StatisticsController`.
  - Обрабатывает HTTP-запросы и возвращает ответы клиентам.

### Применение Domain-Driven Design
- **Value Objects**:
  - `Food`: Описывает тип и количество пищи.
- **Инкапсуляция бизнес-правил**:
  - `Animal`: Методы `Feed`, `Heal`, `MoveToEnclosure` инкапсулируют логику кормления, лечения и перемещения.
  - `Enclosure`: Методы `AddAnimal`, `RemoveAnimal`, `CanAddAnimal` проверяют совместимость и вместимость вольера.
  - `FeedingSchedule`: Методы `UpdateSchedule`, `MarkAsCompleted` управляют расписанием кормления.
- **Доменные события**:
  - `AnimalMovedEvent`: Генерируется при перемещении животного.
  - `FeedingTimeEvent`: Генерируется при наступлении времени кормления.

---

## Тестирование

### Покрытие тестами
- Покрыто более 65% кода:
  - Контроллеры: `AnimalController`, `EnclosureController`, `FeedingScheduleController`.
  - Доменные объекты: `Animal`, `Enclosure`, `FeedingSchedule`.

### Примеры тестов
- **AnimalControllerTests**:
  - Тесты для добавления, удаления, перемещения животных.
- **FeedingScheduleControllerTests**:
  - Тесты для добавления, изменения и отметки выполнения расписания кормления.
- **EnclosureControllerTests**:
  - Тесты для добавления, удаления и уборки вольеров.

---

## Использование

### Запуск приложения
1. Склонируйте репозиторий.
2. Перейдите в папку проекта.
3. Выполните команду:
   dotnet run --project WebApp
4. Откройте браузер и перейдите по адресу `https://localhost:7028/swagger/index.html`.

### Тестирование
1. Перейдите в папку тестового проекта.
2. Выполните команду:
   dotnet test


---

## Соответствие требованиям

| Требование                          | Реализация                                                            | Местоположение                          |
|-------------------------------------|-----------------------------------------------------------------------|-----------------------------------------|
| Добавить/удалить животное           | Реализовано                                                           | `AnimalController`                      |
| Добавить/удалить вольер             | Реализовано                                                           | `EnclosureController`                   |
| Переместить животное между вольерами| Реализовано                                                           | `AnimalController`, `AnimalTransferService` |
| Просмотреть расписание кормления    | Реализовано                                                           | `FeedingScheduleController`             |
| Добавить новое кормление            | Реализовано                                                           | `FeedingScheduleController`             |
| Просмотреть статистику зоопарка     | Реализовано                                                           | `StatisticsController`, `ZooStatisticsService` |

---

#### 1. Добавление/удаление животного:
1. Выбираем добавить животное, прописываем характеристики, пример:
{
  "id": 0,
  "species": "Cow",
  "name": "Mumu",
  "birthDate": "2020-09-02",
  "gender": "Female",
  "favoriteFood": {
    "name": "Grass",
    "quantity": 3
  },
  "isHealthy": true,
  "enclosureId": 0,
  "type": 2,
  "kindnessLevel": 0,
  "earLength": 0,
  "iq": 0,
  "tailLength": 0
}
!!!ВНИМАНИЕ:
type:
- 0 - Хищное
- 1 - Травоядное
- 2 - Птица
- 3 - Рыба

2. Для удаления животного, с помощью вывода всех животных, смотрим на id нужного нам животного и вводим его в разделе `DELETE`.
## Вывод
Программа полностью соответствует требованиям:
- Реализованы все основные функции.
- Соблюдены принципы Clean Architecture.
- Применены концепции Domain-Driven Design.
- Покрытие тестами превышает 65%.

Программа готова к использованию и дальнейшему расширению.
